var r,e=document.querySelector("tbody"),t=document.querySelector(".game-score"),n=document.querySelector(".button"),a=document.querySelector(".message-lose"),o=document.querySelector(".message-win"),s=document.querySelector(".message-start"),i=0;function c(){var e,t;if(f()){do e=Math.floor(4*Math.random()),t=Math.floor(4*Math.random());while(0!==r[e][t])r[e][t]=.8>Math.random()?2:4,l()}}function f(){return r.some(function(r){return r.includes(0)})}function u(r){return r.filter(function(r){return 0!==r})}function l(){for(var t=0;t<4;t++)for(var s=0;s<4;s++){var i=e.rows[t].cells[s],c=r[t][s];i.innerText="",i.classList.value="",i.classList.add("field-cell"),c>0&&(i.innerText=c,i.classList.add("field-cell--".concat(c))),2048===c&&(o.classList.remove("hidden"),n.classList.replace("restart","start"))}(function(){if(f())return!1;for(var e=0;e<4;e++)for(var t=0;t<4;t++)if(r[e][t]===r[e][t+1])return!1;for(var n=0;n<3;n++)for(var a=0;a<4;a++)if(r[n][a]===r[n+1][a])return!1;return!0})()&&a.classList.remove("hidden")}function d(r){for(var e=f(),n=!1,a=0;a<r.length-1;a++)if(r[a]===r[a+1]){n=!0;break}if(!e&&!n)return r;for(var o=u(r),s=0;s<o.length-1;s++)o[s]===o[s+1]&&(o[s]*=2,o[s+1]=0,i+=o[s],t.innerText=i);for(o=u(o);o.length<4;)o.push(0);return o}n.addEventListener("click",function(){n.classList.replace("start","restart"),n.innerText="Restart",s.classList.add("hidden"),a.classList.add("hidden"),o.classList.add("hidden"),r=Array.from({length:4},function(){return[,,,,].fill(0)}),i=0,t.innerText=i,c(),c()}),document.addEventListener("keyup",function(e){e.preventDefault();var t=JSON.stringify(r);switch(e.code){case"ArrowLeft":(function(){for(var e=0;e<4;e++){var t=r[e];t=d(t),r[e]=t}})(),JSON.stringify(r)!==t&&c();break;case"ArrowRight":(function(){for(var e=0;e<4;e++){var t=r[e].reverse();t=d(t).reverse(),r[e]=t}})(),JSON.stringify(r)!==t&&c();break;case"ArrowUp":(function(){for(var e=0;e<4;e++){var t=[r[0][e],r[1][e],r[2][e],r[3][e]];t=d(t);for(var n=0;n<4;n++)r[n][e]=t[n]}})(),JSON.stringify(r)!==t&&c();break;case"ArrowDown":(function(){for(var e=0;e<4;e++){var t=[r[0][e],r[1][e],r[2][e],r[3][e]].reverse();t=d(t).reverse();for(var n=0;n<4;n++)r[n][e]=t[n]}})(),JSON.stringify(r)!==t&&c()}l()});
//# sourceMappingURL=index.46d9933b.js.map
